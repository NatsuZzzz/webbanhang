<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tham gia với chúng tôi - Hồ sơ thành viên Nike</title>
    <link rel="icon" type="image/png" sizes="32x32" th:href="@{/image/icon.png}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/index.css}">
    
    <style>
        /* 1. RESET & BASIC SETUP */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
        body { background-color: #fff; color: #111; display: flex; justify-content: center; padding-top: 40px; padding-bottom: 40px; }
        .register-container { width: 100%; max-width: 480px; padding: 28px; }
        
        /* LOGO */
        .logos { display: flex; gap: 20px; margin-bottom: 30px; }
        .logos img { height: 24px; width: auto; }

        /* HEADER */
        .header-text h1 { font-size: 24px; font-weight: 700; line-height: 28px; margin-bottom: 16px; max-width: 80%; }
        .sub-text { font-size: 14px; color: #111; margin-bottom: 24px; }
        .sub-text a { text-decoration: underline; color: #757575; margin-left: 5px; cursor: pointer; }

        /* FORM */
        .form-group { margin-bottom: 20px; position: relative; }
        input, select { width: 100%; padding: 14px 16px; border: 1px solid #e5e5e5; border-radius: 8px; font-size: 16px; outline: none; transition: border-color 0.2s; color: #111; }
        input:focus, select:focus { border-color: #111; }

        /* ERROR STYLES */
        .input-error { border-color: #d43f3a !important; }
        .error-text { color: #d43f3a; font-size: 12px; margin-top: 5px; }
        
        .row-double { display: flex; gap: 16px; }
        .row-double .form-group { flex: 1; }
        
        .helper-text { font-size: 12px; color: #757575; margin-top: 6px; display: flex; justify-content: space-between; }
        
        .password-toggle { position: absolute; right: 15px; top: 15px; cursor: pointer; color: #757575; font-size: 18px; }

        /* DOB */
        .dob-label { font-size: 14px; color: #757575; margin-bottom: 8px; }
        .dob-container { display: flex; gap: 10px; }
        .dob-container input { text-align: center; }
        .dob-note { font-size: 11px; color: #757575; margin-top: 8px; text-align: center; margin-bottom: 20px; }

        /* CHECKBOX */
        .checkbox-group { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px; }
        .checkbox-group input[type="checkbox"] { width: 20px; height: 20px; margin-top: 2px; accent-color: #111; cursor: pointer; }
        .checkbox-group label { font-size: 12px; color: #757575; line-height: 1.5; cursor: pointer; }
        .checkbox-group a { color: #111; text-decoration: underline; font-weight: 600; }

        /* BUTTON */
        .btn-submit { width: 100%; background-color: #111; color: #fff; padding: 16px; font-size: 16px; font-weight: 700; border: none; border-radius: 30px; cursor: pointer; margin-top: 10px; }
        .btn-submit:hover { background-color: #333; }
    </style>
</head>
<body>

        <!-- header -->
        <div th:replace="fragments/header :: header"></div>

    <div class="register-container">
        <div class="logos">
            <img src="/image/icon.png" alt="Nike Logo"> 
            <img src="/image/jordanIcon.png" alt="Jordan Logo"> 
        </div>

        <div class="header-text">
            <h1>Bây giờ, hãy để chúng tôi giúp bạn trở thành Thành viên Nike.</h1>
            <p class="sub-text">
                Chúng tôi đã gửi một mã xác nhận đến <br> 
                <strong th:text="${registerForm.email != null} ? ${registerForm.email} : 'email-cua-ban@gmail.com'">
                </strong> 
                <a th:href="@{/checkMail}">Chỉnh sửa</a>
            </p>
        </div>

        <form th:action="@{/register}" th:object="${registerForm}" method="POST">
            
            <input type="hidden" th:field="*{email}">

            <div class="form-group">
                <input type="text" placeholder="Mã xác nhận*" 
                       th:field="*{code}"
                       th:classappend="${#fields.hasErrors('code')} ? 'input-error' : ''">
                
                <div class="error-text" th:if="${#fields.hasErrors('code')}" th:errors="*{code}"></div>
                
                <div class="helper-text">
                    <span></span> <span>Gửi lại mã sau 8 giây</span>
                </div>
            </div>

            <div class="row-double">
                <div class="form-group">
                    <input type="text" placeholder="Tên*" 
                           th:field="*{firstName}"
                           th:classappend="${#fields.hasErrors('firstName')} ? 'input-error' : ''">
                    <div class="error-text" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>
                </div>
                <div class="form-group">
                    <input type="text" placeholder="Họ*" 
                           th:field="*{surname}"
                           th:classappend="${#fields.hasErrors('surname')} ? 'input-error' : ''">
                    <div class="error-text" th:if="${#fields.hasErrors('surname')}" th:errors="*{surname}"></div>
                </div>
            </div>

            <div class="form-group">
                <input type="password" id="password" placeholder="Mật khẩu*"
                       th:field="*{password}"
                       th:classappend="${#fields.hasErrors('password')} ? 'input-error' : ''">
                <i class="fa-regular fa-eye password-toggle" onclick="togglePassword()"></i>
                
                <div class="error-text" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>

                <div class="helper-text">
                    <span style="display: block; width: 100%;">× Tối thiểu 8 ký tự</span>
                </div>
                <div class="helper-text">
                    <span>× Chữ hoa, chữ thường và ít nhất một chữ số</span>
                </div>
            </div>

            <div class="form-group">
                <select th:field="*{shoppingPreference}" 
                        th:classappend="${#fields.hasErrors('shoppingPreference')} ? 'input-error' : ''">
                    <option value="" disabled selected>Ưu tiên mua sắm cho*</option>
                    <option value="men">Nam</option>
                    <option value="women">Nữ</option>
                </select>
                <div class="error-text" th:if="${#fields.hasErrors('shoppingPreference')}" th:errors="*{shoppingPreference}"></div>
            </div>

            <div class="dob-label">Ngày sinh</div>
            <div class="dob-container">
                <input type="text" placeholder="Ngày*" th:field="*{dobDay}" th:classappend="${#fields.hasErrors('dobDay')} ? 'input-error' : ''">
                <input type="text" placeholder="Tháng*" th:field="*{dobMonth}" th:classappend="${#fields.hasErrors('dobMonth')} ? 'input-error' : ''">
                <input type="text" placeholder="Năm*" th:field="*{dobYear}" th:classappend="${#fields.hasErrors('dobYear')} ? 'input-error' : ''">
            </div>
            <div class="error-text" th:if="${#fields.hasErrors('dobDay')}" th:text="'Vui lòng nhập ngày sinh'"></div>
            
            <p class="dob-note">Nhận Phần thưởng Thành viên Nike vào ngày sinh nhật của bạn.</p>

            <div class="checkbox-group">
                <input type="checkbox" id="signup-email" th:field="*{emailSignup}">
                <label for="signup-email">Đăng ký nhận email để cập nhật thông tin về sản phẩm, ưu đãi và quyền lợi Thành viên từ Nike.</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="terms" th:field="*{agreeTerms}">
                <label for="terms">Tôi đồng ý với <a href="#">Chính sách Bảo mật</a> và <a href="#">Điều khoản Sử dụng</a> của Nike.</label>
            </div>
            <div class="error-text" th:if="${#fields.hasErrors('agreeTerms')}" th:errors="*{agreeTerms}"></div>

            <button type="submit" class="btn-submit">Tạo tài khoản</button>

        </form>
    </div>

    <script>
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const icon = document.querySelector('.password-toggle');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
    </script>


 <!-- footerfooter -->
 <div th:replace="fragments/footer :: footer"></div>
 <script th:src="@{/js/index.js}"></script>

</body>
</html>